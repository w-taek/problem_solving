---
draft: "true"
---


##### 문제번호 [13335]

---

## 📝 Problem Solving 회고록: [13335] 트럭 (Bridge Simulation)

### 1. 문제 분석 및 접근
* **핵심 개념**: 다리라는 한정된 공간(길이 `w`, 최대 하중 `L`)을 통과하는 객체들의 시뮬레이션.
* **자료구조**: 
    - `dq_wait`: 대기 중인 트럭 (FIFO).
    - `dq_on`: 다리 위를 건너는 트럭 (FIFO + 각 요소의 상태 변화 관리 필요).
* **시뮬레이션 로직**:
    - 매 초(`time++`)마다 다리 위 모든 트럭의 남은 거리(`left_len`)를 1씩 감소.
    - 다리를 다 건넌 트럭(`left_len == 0`)은 제거하고 현재 다리 위 하중(`w_in`)에서 제외.
    - 대기 중인 트럭이 다리의 하중 조건을 만족하면 다리에 진입.

### 2. 주요 학습 내용 및 해결 과정
* **구조체(Struct) 활용의 이점**: 
    - 트럭의 `weight`와 `left_len`을 하나의 단위로 묶어 관리함으로써 코드의 가독성과 유지보수성을 높임.
* **시뮬레이션의 종료 조건**: 
    - 대기 열(`dq_wait`)과 다리 위(`dq_on`)가 모두 비었을 때 종료하는 논리적 설계 능력을 발휘함.
* **상태 갱신 순서의 중요성**: 
    - '시간 경과 → 트럭 이동 → 다리 나감 → 새 트럭 진입' 순서로 구현하여 1초 단위의 정밀한 시뮬레이션을 수행함.

### 3. 코드 개선 및 고려 사항
* **시간 복잡도**: $N$개의 트럭이 각각 다리를 건너는 데 최대 $W$초가 걸리므로, 최악의 경우에도 $O(N \times W)$ 안에 해결 가능함을 파악함.
* **안전한 삭제**: `dq_on.pop_front()`를 호출하기 전 `!dq_on.empty()`를 체크하여 런타임 에러를 방지함.

### 4. 핵심 코드 조각 (Snippet)
```cpp
// 시뮬레이션 핵심 루프
while (!(dq_wait.empty() && dq_on.empty())) {
    time++;
    // 1. 다리 위 트럭 이동
    for (auto& truck : dq_on) truck.left_len--;

    // 2. 다 건넌 트럭 탈출
    if (!dq_on.empty() && dq_on.front().left_len == 0) {
        w_in -= dq_on.front().weight;
        dq_on.pop_front();
    }

    // 3. 새 트럭 진입 시도
    if (!dq_wait.empty() && w_in + dq_wait.front().weight <= L) {
        w_in += dq_wait.front().weight;
        dq_on.push_back(dq_wait.front());
        dq_wait.pop_front();
    }
}
```

---

# 트럭

| 시간 제한 (s) | 메모리 제한 (MB) | 정답률 (%) |
| --- | --- | ---|
| 1 | 512 | 57.634 |

## 문제
강을 가로지르는 하나의 차선으로 된 다리가 하나 있다. 이 다리를 n 개의 트럭이 건너가려고 한다. 트럭의 순서는 바꿀 수 없으며, 트럭의 무게는 서로 같지 않을 수 있다. 다리 위에는 단지 w 대의 트럭만 동시에 올라갈 수 있다. 다리의 길이는 w 단위길이(unit distance)이며, 각 트럭들은 하나의 단위시간(unit time)에 하나의 단위길이만큼만 이동할 수 있다고 가정한다. 동시에 다리 위에 올라가 있는 트럭들의 무게의 합은 다리의 최대하중인 L보다 작거나 같아야 한다. 참고로, 다리 위에 완전히 올라가지 못한 트럭의 무게는 다리 위의 트럭들의 무게의 합을 계산할 때 포함하지 않는다고 가정한다.

예를 들어, 다리의 길이 w는 2, 다리의 최대하중 L은 10, 다리를 건너려는 트럭이 트럭의 무게가 [7, 4, 5, 6]인 순서대로 다리를 오른쪽에서 왼쪽으로 건넌다고 하자. 이 경우 모든 트럭이 다리를 건너는 최단시간은 아래의 그림에서 보는 것과 같이 8 이다.

<img src="../Attached_img/13335.png" width="500px">


Figure 1. 본문의 예에 대해 트럭들이 다리를 건너는 과정.

다리의 길이와 다리의 최대하중, 그리고 다리를 건너려는 트럭들의 무게가 순서대로 주어졌을 때, 모든 트럭이 다리를 건너는 최단시간을 구하는 프로그램을 작성하라.


## 입력
입력 데이터는 표준입력을 사용한다. 입력은 두 줄로 이루어진다. 입력의 첫 번째 줄에는 세 개의 정수 n (1 ≤ n ≤ 1,000) , w (1 ≤ w ≤ 100) and L (10 ≤ L ≤ 1,000)이 주어지는데, n은 다리를 건너는 트럭의 수, w는 다리의 길이, 그리고 L은 다리의 최대하중을 나타낸다. 입력의 두 번째 줄에는 n개의 정수 a1, a2, ⋯ , an (1 ≤ ai ≤ 10)가 주어지는데, ai는 i번째 트럭의 무게를 나타낸다.

## 출력
출력은 표준출력을 사용한다. 모든 트럭들이 다리를 건너는 최단시간을 출력하라.

## 예제 입력 1
```
4 2 10
7 4 5 6
```

## 예제 출력 1
```
8
```

## 예제 입력 2
```
1 100 100
10
```

## 예제 출력 2
```
101
```

## 예제 입력 3
```
10 100 100
10 10 10 10 10 10 10 10 10 10
```

## 예제 출력 3
```
110
```
